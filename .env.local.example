# Copy to .env.local and source before deploy commands:
#   cp .env.local.example .env.local
#   source .env.local

# Required for CI/non-interactive deploys
export CLOUDFLARE_API_TOKEN="<your-cloudflare-api-token>"

# Required for deterministic non-interactive wrangler operations.
# Keep this out of wrangler config files.
export CLOUDFLARE_ACCOUNT_ID="<your-cloudflare-account-id>"

# Optional deployment metadata overrides
export CF_APP_VERSION="0.0.0"
export CF_BUILD_SHA="$(git rev-parse --short HEAD)"

# Optional build-time FFmpeg core base URL.
# Default in source already points to a safe remote release URL, so usually no change needed.
# export VITE_FFMPEG_CORE_BASE_URL="<remote-ffmpeg-core-base-url>"

# Optional build-time Pandoc wasm URL.
# Default in source points to upstream remote wasm and falls back to /wasm/pandoc.wasm if self-hosted.
# export VITE_PANDOC_WASM_URL="<remote-pandoc-wasm-url>"

# Optional log ping protection for /_ops/log-ping
export CF_OPS_LOG_TOKEN="<strong-random-token>"

# Optional metrics scrape token (recommended for /_ops/metrics)
export CF_OPS_METRICS_TOKEN="<strong-random-token>"

# Optional: global rate limiting (Durable Object) for /_ops
# Recommended rollout: shadow â†’ enforce.
# export CF_RATE_LIMIT_GLOBAL_ENABLED="true"
# export CF_RATE_LIMIT_GLOBAL_MODE="shadow"       # off|shadow|enforce
# export CF_RATE_LIMIT_GLOBAL_DO_SHARDS="32"
# export CF_RATE_LIMIT_GLOBAL_TIMEOUT_MS="50"
# export CF_RATE_LIMIT_GLOBAL_FAIL_OPEN="true"
